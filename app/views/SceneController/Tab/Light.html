{{$sceneRef := .scene.Id.Hex}}

<div role="tabpanel" class="tab-pane fade in" id="lightPanel">

	<div class="row">
    	<div class="col-md-12">
			<div class="text-right menubar">
				<button type="button" class="btn btn-sm btn-default" data-toggle="modal" data-target="#lightModal">Add Light</button>
			</div>
		</div>
	</div>

	<div class="row">
		{{range $index, $element := .scene.Lights }}
			<div class="col-md-4">
				<div class="panel panel-default panel-item">
					<div class="panel-heading">
						<div class="row">
							<div class="col-md-9">
								<p class="form-control-static object-item-name">{{$element.Name}}</p>
							</div>
							<div class="col-md-1 text-right">
								<a class="btn btn-danger btn-sm btn-light-delete" data-scene="{{$sceneRef}}" data-index="{{$index}}" role="button">Delete</a>
							</div>
						</div>
					</div>

					<div class="panel-body">
						<form class="form-horizontal" role="form" action="/admin/scenes/{{$sceneRef}}/elements/light/{{$index}}" method="POST">

							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">x</label>
								<div class="col-sm-8">
									<input class="form-control" type="text" name="positionX" value="{{$element.Properties.x}}">
								</div>
							</div>

							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">y</label>
								<div class="col-sm-8">
									<input class="form-control" type="text" name="positionY" value="{{$element.Properties.y}}">
								</div>
							</div>

							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">z</label>
								<div class="col-sm-8">
									<input class="form-control" type="text" name="positionZ" value="{{$element.Properties.z}}">
								</div>
							</div>

							{{if eq $element.Kind "SPOT_LIGHT"}}
							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">direction x</label>
								<div class="col-sm-8">
									<input class="form-control" type="text" name="directionX" value="{{$element.Properties.directionx}}">
								</div>
							</div>

							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">direction y</label>
								<div class="col-sm-8">
									<input class="form-control" type="text" name="directionY" value="{{$element.Properties.directiony}}">
								</div>
							</div>

							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">direction z</label>
								<div class="col-sm-8">
									<input class="form-control" type="text" name="directionZ" value="{{$element.Properties.directionz}}">
								</div>
							</div>

							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">angle</label>
								<div class="col-sm-8">
									<input class="form-control" type="text" name="angle" value="{{$element.Properties.angle}}">
								</div>
							</div>

							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">exponent</label>
								<div class="col-sm-8">
									<input class="form-control" type="text" name="exponent" value="{{$element.Properties.exponent}}">
								</div>
							</div>
							{{end}}

							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">diffuse red</label>
								<div class="col-sm-8">
									<input class="form-control" type="text" name="diffuseRed" value="{{$element.Properties.diffusered}}">
								</div>
							</div>

							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">diffuse blue</label>
								<div class="col-sm-8">
									<input class="form-control" type="text" name="diffuseGreen" value="{{$element.Properties.diffuseblue}}">
								</div>
							</div>

							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">diffuse green</label>
								<div class="col-sm-8">
									<input class="form-control" type="text" name="diffuseBlue" value="{{$element.Properties.diffusegreen}}">
								</div>
							</div>

							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">specular red</label>
								<div class="col-sm-8">
									<input class="form-control" type="text" name="specularRed" value="{{$element.Properties.specularred}}">
								</div>
							</div>

							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">specular blue</label>
								<div class="col-sm-8">
									<input class="form-control" type="text" name="specularBlue" value="{{$element.Properties.specularblue}}">
								</div>
							</div>

							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">specular green</label>
								<div class="col-sm-8">
									<input class="form-control" type="text" name="specularGreen" value="{{$element.Properties.speculargreen}}">
								</div>
							</div>

							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">intensity</label>
								<div class="col-sm-8">
									<input class="form-control" type="text" name="intensity" value="{{$element.Properties.intensity}}">
								</div>
							</div>

							<div class="form-group form-group-sm">
								<div class="col-sm-8 col-sm-offset-4">
									<button type="submit" class="btn btn-default btn-sm">Update</button>
								</div>
							</div>

						</form>
					</div>

				</div>
			</div>
		{{end}}
	</div>
</div>

<script>
	
	$(".btn-light-delete").on("click", function(){
	  var scene = $(this).data("scene"); 
	  var index = $(this).data("index");
	  LABYRINTH.ACTION.delete("/admin/scenes/"+scene+"/elements/light/"+index);
	});

</script>
